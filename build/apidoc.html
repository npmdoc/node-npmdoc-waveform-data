<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/bbc/waveform-data.js"

    >waveform-data (v2.0.1)</a>
</h1>
<h4>Audio Waveform Data Manipulation API â€“ resample, offset and segment waveform data in JavaScript.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data">module waveform-data</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.waveform-data">
            function <span class="apidocSignatureSpan"></span>waveform-data
            <span class="apidocSignatureSpan">(response_data, adapter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapter">
            function <span class="apidocSignatureSpan">waveform-data.</span>adapter
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.arraybuffer">
            function <span class="apidocSignatureSpan">waveform-data.</span>adapters.arraybuffer
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.object">
            function <span class="apidocSignatureSpan">waveform-data.</span>adapters.object
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core">
            function <span class="apidocSignatureSpan">waveform-data.</span>core
            <span class="apidocSignatureSpan">(response_data, adapter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.create">
            function <span class="apidocSignatureSpan">waveform-data.</span>create
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.toString">
            function <span class="apidocSignatureSpan">waveform-data.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.</span>adapters</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.</span>adapters.arraybuffer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.</span>adapters.object.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.</span>core.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.adapters">module waveform-data.adapters</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.arraybuffer">
            function <span class="apidocSignatureSpan">waveform-data.adapters.</span>arraybuffer
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.object">
            function <span class="apidocSignatureSpan">waveform-data.adapters.</span>object
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.adapters.arraybuffer">module waveform-data.adapters.arraybuffer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.arraybuffer.arraybuffer">
            function <span class="apidocSignatureSpan">waveform-data.adapters.</span>arraybuffer
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.arraybuffer.fromResponseData">
            function <span class="apidocSignatureSpan">waveform-data.adapters.arraybuffer.</span>fromResponseData
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.arraybuffer.isCompatible">
            function <span class="apidocSignatureSpan">waveform-data.adapters.arraybuffer.</span>isCompatible
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.adapters.arraybuffer.prototype">module waveform-data.adapters.arraybuffer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.arraybuffer.prototype.at">
            function <span class="apidocSignatureSpan">waveform-data.adapters.arraybuffer.prototype.</span>at
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.adapters.object">module waveform-data.adapters.object</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.object.object">
            function <span class="apidocSignatureSpan">waveform-data.adapters.</span>object
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.object.fromResponseData">
            function <span class="apidocSignatureSpan">waveform-data.adapters.object.</span>fromResponseData
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.object.isCompatible">
            function <span class="apidocSignatureSpan">waveform-data.adapters.object.</span>isCompatible
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.adapters.object.prototype">module waveform-data.adapters.object.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.adapters.object.prototype.at">
            function <span class="apidocSignatureSpan">waveform-data.adapters.object.prototype.</span>at
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.core">module waveform-data.core</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.core">
            function <span class="apidocSignatureSpan">waveform-data.</span>core
            <span class="apidocSignatureSpan">(response_data, adapter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.adapter">
            function <span class="apidocSignatureSpan">waveform-data.core.</span>adapter
            <span class="apidocSignatureSpan">(response_data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.create">
            function <span class="apidocSignatureSpan">waveform-data.core.</span>create
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.core.</span>adapters</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.waveform-data.core.prototype">module waveform-data.core.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.at">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>at
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.at_time">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>at_time
            <span class="apidocSignatureSpan">(time)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.in_offset">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>in_offset
            <span class="apidocSignatureSpan">(pixel)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.max_sample">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>max_sample
            <span class="apidocSignatureSpan">(offset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.min_sample">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>min_sample
            <span class="apidocSignatureSpan">(offset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.offset">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>offset
            <span class="apidocSignatureSpan">(start, end)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.offsetValues">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>offsetValues
            <span class="apidocSignatureSpan">(start, length, correction)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.remove_point">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>remove_point
            <span class="apidocSignatureSpan">(identifier)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.resample">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>resample
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.set_point">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>set_point
            <span class="apidocSignatureSpan">(timeStamp, identifier)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.set_segment">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>set_segment
            <span class="apidocSignatureSpan">(start, end, identifier)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.waveform-data.core.prototype.time">
            function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>time
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>max</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>min</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data" id="apidoc.module.waveform-data">module waveform-data</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.waveform-data" id="apidoc.element.waveform-data.waveform-data">
        function <span class="apidocSignatureSpan"></span>waveform-data
        <span class="apidocSignatureSpan">(response_data, adapter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformData(response_data, adapter){
<span class="apidocCodeCommentSpan">  /**
   * Backend adapter used to manage access to the data.
   *
   * @type {Object}
   */
</span>  this.adapter = adapter.fromResponseData(response_data);

  /**
   * Defined segments.
   *
   * ```javascript
   * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
   *
   * console.log(waveform.segments.speakerA);          // -&#x3e; undefined
   *
   * waveform.set_segment(30, 90, &#x22;speakerA&#x22;);
   *
   * console.log(waveform.segments.speakerA.start);    // -&#x3e; 30
   * ```
   *
   * @type {Object} A hash of `WaveformDataSegment` objects.
   */
  this.segments = {};

  /**
   * Defined points.
   *
   * ```javascript
   * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
   *
   * console.log(waveform.points.speakerA);          // -&#x3e; undefined
   *
   * waveform.set_point(30, &#x22;speakerA&#x22;);
   *
   * console.log(waveform.points.speakerA.timeStamp);    // -&#x3e; 30
   * ```
   *
   * @type {Object} A hash of `WaveformDataPoint` objects.
   */
  this.points = {};

  this.offset(0, this.adapter.length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapter" id="apidoc.element.waveform-data.adapter">
        function <span class="apidocSignatureSpan">waveform-data.</span>adapter
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.arraybuffer" id="apidoc.element.waveform-data.adapters.arraybuffer">
        function <span class="apidocSignatureSpan">waveform-data.</span>adapters.arraybuffer
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataArrayBufferAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.object" id="apidoc.element.waveform-data.adapters.object">
        function <span class="apidocSignatureSpan">waveform-data.</span>adapters.object
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataObjectAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core" id="apidoc.element.waveform-data.core">
        function <span class="apidocSignatureSpan">waveform-data.</span>core
        <span class="apidocSignatureSpan">(response_data, adapter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformData(response_data, adapter){
<span class="apidocCodeCommentSpan">  /**
   * Backend adapter used to manage access to the data.
   *
   * @type {Object}
   */
</span>  this.adapter = adapter.fromResponseData(response_data);

  /**
   * Defined segments.
   *
   * ```javascript
   * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
   *
   * console.log(waveform.segments.speakerA);          // -&#x3e; undefined
   *
   * waveform.set_segment(30, 90, &#x22;speakerA&#x22;);
   *
   * console.log(waveform.segments.speakerA.start);    // -&#x3e; 30
   * ```
   *
   * @type {Object} A hash of `WaveformDataSegment` objects.
   */
  this.segments = {};

  /**
   * Defined points.
   *
   * ```javascript
   * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
   *
   * console.log(waveform.points.speakerA);          // -&#x3e; undefined
   *
   * waveform.set_point(30, &#x22;speakerA&#x22;);
   *
   * console.log(waveform.points.speakerA.timeStamp);    // -&#x3e; 30
   * ```
   *
   * @type {Object} A hash of `WaveformDataPoint` objects.
   */
  this.points = {};

  this.offset(0, this.adapter.length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.create" id="apidoc.element.waveform-data.create">
        function <span class="apidocSignatureSpan">waveform-data.</span>create
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createFromResponseData(data){
  var adapter = null;
  var xhrData = null;

  if (data &#x26;&#x26; typeof data === &#x22;object&#x22; &#x26;&#x26; (&#x22;responseText&#x22; in data || &#x22;response&#x22; in data)){
    xhrData = (&#x22;responseType&#x22; in data) ? data.response : (data.responseText || data.response);
  }

  Object.keys(WaveformData.adapters).some(function(adapter_id){
    if (WaveformData.adapters[adapter_id].isCompatible(xhrData || data)){
      adapter = WaveformData.adapters[adapter_id];
      return true;
    }
  });

  if (adapter === null){
    throw new TypeError(&#x22;Could not detect a WaveformData adapter from the input.&#x22;);
  }

  return new WaveformData(xhrData || data, adapter);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const xhr = new XMLHttpRequest();

// .dat file generated by audiowaveform program
xhr.responseType = &#x22;arraybuffer&#x22;;
xhr.open(&#x22;GET&#x22;, &#x22;http://example.com/waveforms/track.dat&#x22;);

xhr.addEventListener(&#x22;load&#x22;, progressEvent =&#x3e; {
  const waveform = WaveformData.<span class="apidocCodeKeywordSpan">create</span>(progressEvent.target);

  console.log(waveform.duration);
});

xhr.send();
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.toString" id="apidoc.element.waveform-data.toString">
        function <span class="apidocSignatureSpan">waveform-data.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.adapters" id="apidoc.module.waveform-data.adapters">module waveform-data.adapters</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.adapters.arraybuffer" id="apidoc.element.waveform-data.adapters.arraybuffer">
        function <span class="apidocSignatureSpan">waveform-data.adapters.</span>arraybuffer
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataArrayBufferAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.object" id="apidoc.element.waveform-data.adapters.object">
        function <span class="apidocSignatureSpan">waveform-data.adapters.</span>object
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataObjectAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.adapters.arraybuffer" id="apidoc.module.waveform-data.adapters.arraybuffer">module waveform-data.adapters.arraybuffer</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.adapters.arraybuffer.arraybuffer" id="apidoc.element.waveform-data.adapters.arraybuffer.arraybuffer">
        function <span class="apidocSignatureSpan">waveform-data.adapters.</span>arraybuffer
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataArrayBufferAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.arraybuffer.fromResponseData" id="apidoc.element.waveform-data.adapters.arraybuffer.fromResponseData">
        function <span class="apidocSignatureSpan">waveform-data.adapters.arraybuffer.</span>fromResponseData
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function fromArrayBufferResponseData(response_data){
  return new WaveformDataArrayBufferAdapter(new DataView(response_data));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.arraybuffer.isCompatible" id="apidoc.element.waveform-data.adapters.arraybuffer.isCompatible">
        function <span class="apidocSignatureSpan">waveform-data.adapters.arraybuffer.</span>isCompatible
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isCompatible(data){
  return data &#x26;&#x26; typeof data === &#x22;object&#x22; &#x26;&#x26; &#x22;byteLength&#x22; in data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.adapters.arraybuffer.prototype" id="apidoc.module.waveform-data.adapters.arraybuffer.prototype">module waveform-data.adapters.arraybuffer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.adapters.arraybuffer.prototype.at" id="apidoc.element.waveform-data.adapters.arraybuffer.prototype.at">
        function <span class="apidocSignatureSpan">waveform-data.adapters.arraybuffer.prototype.</span>at
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function at_sample(index){
  return Math.round(this.data.getInt8(20 + index));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.adapters.object" id="apidoc.module.waveform-data.adapters.object">module waveform-data.adapters.object</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.adapters.object.object" id="apidoc.element.waveform-data.adapters.object.object">
        function <span class="apidocSignatureSpan">waveform-data.adapters.</span>object
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataObjectAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.object.fromResponseData" id="apidoc.element.waveform-data.adapters.object.fromResponseData">
        function <span class="apidocSignatureSpan">waveform-data.adapters.object.</span>fromResponseData
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function fromJSONResponseData(response_data){
  if (typeof response_data === &#x22;string&#x22;){
    return new WaveformDataObjectAdapter(JSON.parse(response_data));
  }
  else{
    return new WaveformDataObjectAdapter(response_data);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.adapters.object.isCompatible" id="apidoc.element.waveform-data.adapters.object.isCompatible">
        function <span class="apidocSignatureSpan">waveform-data.adapters.object.</span>isCompatible
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isCompatible(data){
  return data &#x26;&#x26; (typeof data === &#x22;object&#x22; &#x26;&#x26; &#x22;sample_rate&#x22; in data) || (typeof data === &#x22;string&#x22; &#x26;&#x26; &#x22;sample_rate&#x22; in JSON.parse
(data));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.adapters.object.prototype" id="apidoc.module.waveform-data.adapters.object.prototype">module waveform-data.adapters.object.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.adapters.object.prototype.at" id="apidoc.element.waveform-data.adapters.object.prototype.at">
        function <span class="apidocSignatureSpan">waveform-data.adapters.object.prototype.</span>at
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function at_sample(index){
  return Math.round(this.data.data[index]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.core" id="apidoc.module.waveform-data.core">module waveform-data.core</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.core.core" id="apidoc.element.waveform-data.core.core">
        function <span class="apidocSignatureSpan">waveform-data.</span>core
        <span class="apidocSignatureSpan">(response_data, adapter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformData(response_data, adapter){
<span class="apidocCodeCommentSpan">  /**
   * Backend adapter used to manage access to the data.
   *
   * @type {Object}
   */
</span>  this.adapter = adapter.fromResponseData(response_data);

  /**
   * Defined segments.
   *
   * ```javascript
   * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
   *
   * console.log(waveform.segments.speakerA);          // -&#x3e; undefined
   *
   * waveform.set_segment(30, 90, &#x22;speakerA&#x22;);
   *
   * console.log(waveform.segments.speakerA.start);    // -&#x3e; 30
   * ```
   *
   * @type {Object} A hash of `WaveformDataSegment` objects.
   */
  this.segments = {};

  /**
   * Defined points.
   *
   * ```javascript
   * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
   *
   * console.log(waveform.points.speakerA);          // -&#x3e; undefined
   *
   * waveform.set_point(30, &#x22;speakerA&#x22;);
   *
   * console.log(waveform.points.speakerA.timeStamp);    // -&#x3e; 30
   * ```
   *
   * @type {Object} A hash of `WaveformDataPoint` objects.
   */
  this.points = {};

  this.offset(0, this.adapter.length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.adapter" id="apidoc.element.waveform-data.core.adapter">
        function <span class="apidocSignatureSpan">waveform-data.core.</span>adapter
        <span class="apidocSignatureSpan">(response_data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WaveformDataAdapter(response_data){
  this.data = response_data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.create" id="apidoc.element.waveform-data.core.create">
        function <span class="apidocSignatureSpan">waveform-data.core.</span>create
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createFromResponseData(data){
  var adapter = null;
  var xhrData = null;

  if (data &#x26;&#x26; typeof data === &#x22;object&#x22; &#x26;&#x26; (&#x22;responseText&#x22; in data || &#x22;response&#x22; in data)){
    xhrData = (&#x22;responseType&#x22; in data) ? data.response : (data.responseText || data.response);
  }

  Object.keys(WaveformData.adapters).some(function(adapter_id){
    if (WaveformData.adapters[adapter_id].isCompatible(xhrData || data)){
      adapter = WaveformData.adapters[adapter_id];
      return true;
    }
  });

  if (adapter === null){
    throw new TypeError(&#x22;Could not detect a WaveformData adapter from the input.&#x22;);
  }

  return new WaveformData(xhrData || data, adapter);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const xhr = new XMLHttpRequest();

// .dat file generated by audiowaveform program
xhr.responseType = &#x22;arraybuffer&#x22;;
xhr.open(&#x22;GET&#x22;, &#x22;http://example.com/waveforms/track.dat&#x22;);

xhr.addEventListener(&#x22;load&#x22;, progressEvent =&#x3e; {
  const waveform = WaveformData.<span class="apidocCodeKeywordSpan">create</span>(progressEvent.target);

  console.log(waveform.duration);
});

xhr.send();
```
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.waveform-data.core.prototype" id="apidoc.module.waveform-data.core.prototype">module waveform-data.core.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.at" id="apidoc.element.waveform-data.core.prototype.at">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>at
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function at_sample_proxy(index){
  return this.adapter.at(index);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.at_time" id="apidoc.element.waveform-data.core.prototype.at_time">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>at_time
        <span class="apidocSignatureSpan">(time)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function at_time(time){
  return Math.floor((time * this.adapter.sample_rate) / this.adapter.scale);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.in_offset" id="apidoc.element.waveform-data.core.prototype.in_offset">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>in_offset
        <span class="apidocSignatureSpan">(pixel)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isInOffset(pixel){
  return pixel &#x3e;= this.offset_start &#x26;&#x26; pixel &#x3c; this.offset_end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   * waveform.offset(70, 100);
   * console.log(waveform.points.example.visible);        // -&#x3e; false
   * ```
   *
   * @return {Boolean} True if visible, false otherwise.
   */
  get visible(){
    return this.context.<span class="apidocCodeKeywordSpan">in_offset</span>(this.timeStamp);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.max_sample" id="apidoc.element.waveform-data.core.prototype.max_sample">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>max_sample
        <span class="apidocSignatureSpan">(offset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getMaxValue(offset){
  return this.adapter.at((offset * 2) + 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.min_sample" id="apidoc.element.waveform-data.core.prototype.min_sample">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>min_sample
        <span class="apidocSignatureSpan">(offset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getMinValue(offset){
  return this.adapter.at(offset * 2);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.offset" id="apidoc.element.waveform-data.core.prototype.offset">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>offset
        <span class="apidocSignatureSpan">(start, end)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">offset = function (start, end){
  var data_length = this.adapter.length;

  if (end &#x3c; 0){
    throw new RangeError(&#x22;End point must be non-negative [&#x22; + Number(end) + &#x22; &#x3c; 0]&#x22;);
  }

  if (end &#x3c;= start){
    throw new RangeError(&#x22;We can&#x27;t end prior to the starting point [&#x22; + Number(end) + &#x22; &#x3c;= &#x22; + Number(start) + &#x22;]&#x22;);
  }

  if (start &#x3c; 0){
    throw new RangeError(&#x22;Start point must be non-negative [&#x22; + Number(start) + &#x22; &#x3c; 0]&#x22;);
  }

  if (start &#x3e;= data_length){
    throw new RangeError(&#x22;Start point must be within range [&#x22; + Number(start) + &#x22; &#x3e;= &#x22; + data_length + &#x22;]&#x22;);
  }

  if (end &#x3e; data_length){
    end = data_length;
  }

  this.offset_start = start;
  this.offset_end = end;
  this.offset_length = end - start;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* ```javascript
* var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
* waveform.set_point(10, &#x22;example&#x22;);
*
* console.log(waveform.points.example.timeStamp);  // -&#x3e; 10
*
* waveform.<span class="apidocCodeKeywordSpan">offset</span>(20, 50);
* console.log(waveform.points.example.timeStamp);  // -&#x3e; 10
*
* waveform.offset(70, 100);
* console.log(waveform.points.example.timeStamp);  // -&#x3e; 10
* ```
* @type {Integer} Time Stamp of the point
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.offsetValues" id="apidoc.element.waveform-data.core.prototype.offsetValues">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>offsetValues
        <span class="apidocSignatureSpan">(start, length, correction)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getOffsetValues(start, length, correction){
  var adapter = this.adapter;
  var values = [];

  correction += (start * 2);  //offsetting the positioning query

  for (var i = 0; i &#x3c; length; i++){
    values.push(adapter.at((i * 2) + correction));
  }

  return values;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * console.log(waveform.segments.example.min.offset_length); // -&#x3e; 30
 * console.log(waveform.segments.example.min[0]);            // -&#x3e; -5
 * ```
 *
 * @return {Array.&#x3c;Integer&#x3e;} Min values of the segment.
 */
get min(){
  return this.visible ? this.context.<span class="apidocCodeKeywordSpan">offsetValues</span>(this.offset_start, this.offset_length
, 0) : [];
},
/**
 * Return the maximum values for the segment.
 *
 * ```javascript
 * var waveform = new WaveformData({ ... }, WaveformData.adapters.object);
 * waveform.set_segment(10, 50, &#x22;example&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.remove_point" id="apidoc.element.waveform-data.core.prototype.remove_point">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>remove_point
        <span class="apidocSignatureSpan">(identifier)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removePoint(identifier) {
  if(this.points[identifier]) {
    delete this.points[identifier];
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.resample" id="apidoc.element.waveform-data.core.prototype.resample">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>resample
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resample = function (options){
  if (typeof options === &#x27;number&#x27;){
    options = {
      width: options
    };
  }

  options.input_index = typeof options.input_index === &#x27;number&#x27; ? options.input_index : null;
  options.output_index = typeof options.output_index === &#x27;number&#x27; ? options.output_index : null;
  options.scale = typeof options.scale === &#x27;number&#x27; ? options.scale : null;
  options.width = typeof options.width === &#x27;number&#x27; ? options.width : null;

  var is_partial_resampling = Boolean(options.input_index) || Boolean(options.output_index);

  if (options.input_index !== null &#x26;&#x26; (options.input_index &#x3e;= 0) === false){
    throw new RangeError(&#x27;options.input_index should be a positive integer value. [&#x27;+ options.input_index +&#x27;]&#x27;);
  }

  if (options.output_index !== null &#x26;&#x26; (options.output_index &#x3e;= 0) === false){
    throw new RangeError(&#x27;options.output_index should be a positive integer value. [&#x27;+ options.output_index +&#x27;]&#x27;);
  }

  if (options.width !== null &#x26;&#x26; (options.width &#x3e; 0) === false){
    throw new RangeError(&#x27;options.width should be a strictly positive integer value. [&#x27;+ options.width +&#x27;]&#x27;);
  }

  if (options.scale !== null &#x26;&#x26; (options.scale &#x3e; 0) === false){
    throw new RangeError(&#x27;options.scale should be a strictly positive integer value. [&#x27;+ options.scale +&#x27;]&#x27;);
  }

  if (!options.scale &#x26;&#x26; !options.width){
    throw new RangeError(&#x27;You should provide either a resampling scale or a width in pixel the data should fit in.&#x27;);
  }

  var definedPartialOptionsCount = [&#x27;width&#x27;, &#x27;scale&#x27;, &#x27;output_index&#x27;, &#x27;input_index&#x27;].reduce(function(count, key){
    return count + (options[key] === null ? 0 : 1);
  }, 0);

  if (is_partial_resampling &#x26;&#x26; definedPartialOptionsCount !== 4) {
    throw new Error(&#x27;Some partial resampling options are missing. You provided &#x27; + definedPartialOptionsCount + &#x27; of them over 4
.&#x27;);
  }

  var output_data = [];
  var samples_per_pixel = options.scale || Math.floor(this.duration * this.adapter.sample_rate / options.width);    //scale we want
 to reach
  var scale = this.adapter.scale;   //scale we are coming from
  var channel_count = 2;

  var input_buffer_size = this.adapter.length; //the amount of data we want to resample i.e. final zoom want to resample all data
 but for intermediate zoom we want to resample subset
  var input_index = options.input_index || 0; //is this start point? or is this the index at current scale
  var output_index = options.output_index || 0; //is this end point? or is this the index at scale we want to be?
  var min = input_buffer_size ? this.min_sample(input_index) : 0; //min value for peak in waveform
  var max = input_buffer_size ? this.max_sample(input_index) : 0; //max value for peak in waveform
  var min_value = -128;
  var max_value = 127;

  if (samples_per_pixel &#x3c; scale){
    throw new Error(&#x22;Zoom level &#x22;+samples_per_pixel+&#x22; too low, minimum: &#x22;+scale);
  }

  var where, prev_where, stop, value, last_input_index;

  var sample_at_pixel = function sample_at_pixel(x){
    return Math.floor(x * samples_per_pixel);
  };

  var add_sample = function add_sample(min, max){
    output_data.push(min, max);
  };

  while (input_index &#x3c; input_buffer_size) {
    while (Math.floor(sample_at_pixel(output_index) / scale) &#x3c;= input_index){
      if (output_index){
        add_sample(min, max);
      }

      last_input_index = input_index;

      output_index++;

      where      = sample_at_pixel(output_index);
      prev_where = sample_at_pixel(output_index - 1);

      if (where !== prev_where){
        min = max_value;
        max = min_value;
      }
    }

    where = sample_at_pixel(output_index);
    stop = Math.floor(where / scale);

    if (stop &#x3e; input_buffer_size){
      stop = input_buffer_size;
    }

    while (input_index &#x3c; stop){
      value = this.min_sample(input_index);

      if (value &#x3c; min){
        min = value;
      }

      value = this.max_sample(input_index);

      if (value &#x3e; max){
        max = value;
      }

      input_index++;
    }

    if (is_partial_resampling &#x26;&#x26; (output_data.length / channel_count) &#x3e;= options.width) {
      break;
    }
  } ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...

const WaveformData = require(&#x22;waveform-data&#x22;);
const request = require(&#x22;superagent&#x22;);
const args = require(&#x22;optimist&#x22;).argv;

request.get(`http://api.myapp.com/waveforms/${arvg.wid}.json`)
  .then(response =&#x3e; {
  const resampled_waveform = WaveformData.create(response.body).<span class="apidocCodeKeywordSpan">resample</span>(2000);

  process.stdout.write(JSON.stringify({
    min: resampled_waveform.min,
    max: resampled_waveform.max
  }));
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.set_point" id="apidoc.element.waveform-data.core.prototype.set_point">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>set_point
        <span class="apidocSignatureSpan">(timeStamp, identifier)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setPoint(timeStamp, identifier){
  if(identifier === undefined || identifier === null || identifier.length === 0) {
    identifier = &#x22;default&#x22;;
  }

  this.points[identifier] = new WaveformDataPoint(this, timeStamp);

  return this.points[identifier];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Points are an easy way to keep track bookmarks of the described audio file.
*
* They return values based on the actual offset. Which means if you change your offset and:
*
* * a point becomes **out of scope**, no data will be returned;
* * a point is **fully included in the offset**, its whole content will be returned.
*
* Points are created with the `WaveformData.<span class="apidocCodeKeywordSpan">set_point</span>(timeStamp, name?)` method.
*
* @see WaveformData.prototype.set_point
* @param {WaveformData} context WaveformData instance
* @param {Integer} start Initial start index
* @param {Integer} end Initial end index
* @constructor
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.set_segment" id="apidoc.element.waveform-data.core.prototype.set_segment">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>set_segment
        <span class="apidocSignatureSpan">(start, end, identifier)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setSegment(start, end, identifier){
  if (identifier === undefined || identifier === null || identifier.length === 0) {
    identifier = &#x22;default&#x22;;
  }

  this.segments[identifier] = new WaveformDataSegment(this, start, end);

  return this.segments[identifier];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* They return values based on the actual offset. Which means if you change your offset and:
*
* * a segment becomes **out of scope**, no data will be returned;
* * a segment is only **partially included in the offset**, only the visible parts will be returned;
* * a segment is **fully included in the offset**, its whole content will be returned.
*
* Segments are created with the `WaveformData.<span class="apidocCodeKeywordSpan">set_segment</span>(from, to, name?)` method.
*
* @see WaveformData.prototype.set_segment
* @param {WaveformData} context WaveformData instance
* @param {Integer} start Initial start index
* @param {Integer} end Initial end index
* @constructor
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.waveform-data.core.prototype.time" id="apidoc.element.waveform-data.core.prototype.time">
        function <span class="apidocSignatureSpan">waveform-data.core.prototype.</span>time
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function time(index){
  return index * this.seconds_per_pixel;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
